{% extends 'store/base.html' %}
{% load static %}
{% block content %}
{% if messages %}
<div class="messages">
    {% for message in messages %}
        <div class="alert alert-success">{{ message }}</div>
    {% endfor %}
</div>
{% endif %}

<div class="products-page">
    <div class="container">
        <div class="page-header">
            <h1><i class="fas fa-store"></i> Our Products</h1>
            <form method="get" action="{% url 'product_list' %}" class="search-form">
                <input type="text" name="q" placeholder="Search products..." value="{{ query }}" class="search-input">
                <button type="submit" class="search-btn"><i class="fas fa-search"></i></button>
            </form>
        </div>
        {% if products %}
        <div class="products-grid">
            {% for product in products %}
            <div class="product-card">
                <div class="product-image">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
                    {% else %}
                        <img src="{% static 'images/default.png' %}" alt="No image" class="product-img">
                    {% endif %}
                    {% if product.is_new %}
                    <div class="product-badge">New</div>
                    {% endif %}
                </div>
                <div class="product-info">
                    <h3><a href="{% url 'product_detail' product.id %}">{{ product.name }}</a></h3>
                    <p class="product-description">{{ product.description|truncatechars:100 }}</p>
                    <div class="product-footer">
                        <span class="price">â‚¹{{ product.price }}</span>
                        <form method="post" action="{% url 'add_to_cart' product.id %}">
                            {% csrf_token %}
                            <button type="submit" class="add-to-cart-btn">Add to Cart</button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-products">
            <i class="fas fa-box-open"></i>
            <h2>No Products Available</h2>
            <p>We're currently updating our inventory. Please check back soon!</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

